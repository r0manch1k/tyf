groups:
  - name: CriticalAlers
    rules:
      - alert: Service_Down
        expr: up == 0
        for: 1m
        labels:
          severity: critical
        annotations:
          description: "üö® Service '{{ $labels.instance }}' is down üö®"
          summary: "–°–µ—Ä–≤–∏—Å '{{ $labels.instance }}' –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –±–æ–ª–µ–µ 1 –º–∏–Ω—É—Ç—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —ç—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å –∏ —Å–∞–º —Å–µ—Ä–≤–µ—Ä."

      - alert: DISK_Space_Usage_Is_High
        expr: 100 - avg(node_filesystem_avail_bytes{fstype="btrfs"}) / ((sum(node_filesystem_size_bytes{fstype="btrfs"}) + sum(node_filesystem_size_bytes{fstype="tmpfs"})) / 100) > 95
        for: 1m
        labels:
          severity: critical
        annotations:
          description: "üö® High disk usage: {{ $labels.instance }} üö®"
          summary: "–î–∏—Å–∫ –∑–∞–ø–æ–ª–Ω–µ–Ω –Ω–∞ 95%. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∏—Å–∫ –∏ –ø—Ä–∏–º–∏—Ç–µ –º–µ—Ä—ã."

      - alert: CPU_Usage_Is_High
        expr: 100 - (avg(rate(node_cpu_seconds_total{mode="idle"}[5m])) * 100) > 90
        for: 1m
        labels:
          severity: critical
        annotations:
          description: "üö® High CPU usage {{ $labels.instance }} üö®"
          summary: "–°–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–æ–ª–µ–µ 90% CPU. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É —Å–µ—Ä–≤–µ—Ä–∞."

      - alert: RAM_Usage_Is_High
        expr: 100 * (1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) > 90
        for: 1m
        labels:
          severity: critical
        annotations:
          description: "üö® High RAM usage {{ $labels.instance }} üö®"
          summary: "–°–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–æ–ª–µ–µ 90% RAM. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É —Å–µ—Ä–≤–µ—Ä–∞."

      - alert: Too_High_Internal_Errors
        expr: sum(irate(django_http_responses_total_by_status_total{status=~"5.+",app=~"^$application$"}[5m])) > 10
        for: 1m
        labels:
          severity: critical
        annotations:
          description: "üö® Too high internal errors in: {{ $labels.instance }} üö®"
          summary: "'{{ $labels.instance }}' –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã —Å –∫–æ–¥–æ–º –æ—à–∏–±–∫–∏ > 500 —Å–≤—ã—à–µ 10 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É —Å–µ—Ä–≤–∏—Å–∞."
